# emailSR

𝐞𝐦𝐚𝐢𝐥𝐒𝐑 使用指南

emailSR是一种基于邮件的在线图像超分辨率（清晰化）服务。您可以将想要进行超分辨率处理的图片以附件的方式发送到指定邮箱中，该服务会自动对您的图片进行超分辨率处理，并将处理后的图片作为回复邮件的附件发送给您。

为什么你应该试试emailSR：
1、让模糊图片变得清晰无比，简直就像是魔法
2、内置的超分辨率算法比常见的waifu2x效果好得多得多
3、无需注册，没有使用限制（almost）
4、完全免费，免费，免费
5、提供多个放大模型，对照片或插画均有良好的放大效果
6、很酷

如果想要使用本服务，请按以下要求发送邮件：
【收件邮箱】：y.nw@qq.com
【主题】（标题）：放大
主题中可额外添加的内容：model（可不写，当前可选的有model0（默认）：Real-ESRGAN；model1：Real-ESRGAN-anime；model2：RealSR）；max（修改分辨率上限至2500万像素）
【附件】：一张或多张您想要进行放大处理的图片

如果仍不清楚如何使用，请参考以下案例：
【发件人】：您的邮箱
【收件人】：y.nw@qq.com
【主题】：放大model1
【附件】：233.jpg；2333.png
【正文】：空

注意：
1、【重要】服务运行期间，如果长时间未收到回复邮件，请检查您的“垃圾邮件”文件夹，或联系服务提供者@珊瑚宫心海（酷安）。
2、由于判别算法限制，目前支持的图片文件后缀为jpg、JPG、Jpg、jpeg、JPEG、Jpeg、png、PNG、Png，请注意图片格式或后缀拼写。
3、由于服务端性能限制，目前默认拒绝对分辨率超过400万像素的图片进行处理。（请不要发送分辨率过高的图片文件，拜托啦！）
4、对于同一用户，请勿发送文件名相同的不同图片，否则，只有首先被接收的图片能得到处理。
5、由于个人设备使用的缘故，目前服务尚未提供实时处理，最长可能需要等待约24小时，如果需要实时处理，请联系酷安@珊瑚宫心海上线服务。

其它：
1、测试期间随时可能宕机，抱歉啦！
2、目前服务端运行于搭载Apple M1芯片的平台上，使用Real-ESRGAN的处理速度约为380万像素每分钟。这意味着如果您上传了一张1920*1080分辨率的图像，服务端需要至少30秒来对图片进行处理。当服务使用人数较多时，请求将依次排队处理，此时可能需要更长的时间来获取回复邮件。
3、为了提高发送附件的成功率与速度，本服务会视图片大小自动将处理后的原始PNG图片压缩为JPG图片，通常情况下不会有明显的图像质量下降，但如果您需要未经压缩的PNG原图，请联系酷安@珊瑚宫心海来获取原图。
4、源代码已经开源于GitHub，地址为：https://github.com/YNW256/emailSR，欢迎在自己的平台上部署该服务，如果需要帮助，请联系酷安@珊瑚宫心海。



emailSR v2.0更新日志：
新增：
1、新增单用户多图片处理能力
2、新增白名单机制，新增VIP用户判别能力（暂未启用）
3、新增超分辨率模型自定义能力（暂未启用，预计v2.1版本开放）
改进：
1、大幅优化代码结构
2、提高注释详细程度
3、提高可维护性与拓展性
4、修改了回复邮件的内容
5、移除了处理前的预先回复邮件（后续按照处理图像的总分辨率智能决策是否发送）
修复：
1、修复了返回邮件中，发件人格式错误的问题，目前发件人被设置为Kokomi	<741083048@qq.com>
2、修复了返回邮件中，附件文件名错误的问题
6、缓解了网络不稳定导致的服务端程序崩溃
3、缓解了偶发编码错误导致的邮件获取失败，目前使用errors='ignore’忽略编码错误，可靠性未知
已知问题：
1、由于新版本完全重写，且未经大规模测试，服务稳定性相较v1.2有所下降
2、网络不稳定导致的服务端程序崩溃
3、偶发编码错误导致的邮件获取失败（仍在研究错误机理和更有效的解决方案）
3、炒饭导致的服务端程序崩溃

emailSR v2.1更新日志：
修复：
1、修复了在图像超高分辨率的情况下，出现无法压缩为jpg的错误
2、修复了图片ID错乱导致的错误处理
3、修复了网络错误导致的服务端程序崩溃
优化：
1、使用了新的已处理邮件列表管理机制，优化邮件处理顺序与逻辑
2、开发了全新的初始化脚本，用于手动排除已处理邮件列表错误
3、开发了全新的debug工具

emailSR v2.2更新日志：
新增：
1、新增黑名单机制
2、新增强制分辨率上限：2500万像素，该上限无法突破
修复：
1、修复了偶发的POP3连接关闭错误
优化：
1、优化了邮件获取出错时的跳过逻辑，提高稳定性
2、丰富了无法完成请求时，回复邮件中的内容。现在可以告知用户分辨率过高或后缀错误

emailSR v2.3更新日志：
新增：
1、全新开发了可用于检查emailSR服务状态的安卓app——emailSR Checker，欢迎试用。预览版下载地址：https://github.com/YNW256/emailSR/releases
2、新增了用户自定义超分辨率处理模型功能。
修复：
1、修复多文件处理时，总文件大小超过50MB而导致的邮件无法发送问题
优化：
1、优化了多文件处理总文件大小过大时的邮件发送逻辑
2、更新了图片压缩判别算法，优化了特定情况下图片压缩的压缩率
