# emailSR

调试中，源代码暂未公开。如有需求，可以向酷安@珊瑚宫心海 索取源代码。

emailSR是一种基于邮件的在线图像超分辨率服务。您可以将想要进行超分辨率处理的图片以附件的方式发送到指定邮箱中，该服务会自动对您的图片进行超分辨率处理，并将处理后的图片作为回复邮件的附件发送给您。

如果对测试感兴趣，请按以下要求发送邮件：
收件邮箱：741083048@qq.com
主题（标题）：放大

由于服务端性能限制，目前默认拒绝对分辨率超过4MP（四百万像素）的图片进行处理。如果想要突破分辨率限制，请使用“放大max”作为您的邮件主题。（请不要发送分辨率过高的图片文件，拜托啦！）

注意：
1、【重要】服务运行期间，如果长时间未收到回复邮件，请检查您的“垃圾邮件”文件夹，或联系服务提供者@珊瑚宫心海（酷安）。
2、由于判别算法限制，目前支持的图片文件后缀为jpg、JPG、Jpg、jpeg、JPEG、Jpeg、png、PNG、Png，请注意图片格式或后缀拼写。
3、对于同一用户，请勿发送文件名相同的不同图片，否则，只有首先被接收的图片能得到处理。

其它：
1、测试期间随时可能宕机，抱歉啦！
1、目前使用的超分辨率算法为Real-ESRGAN，使用的模型为realesrgan-x4plus，后续将支持放大模型自定义，敬请期待。
3、服务端运行于搭载Apple M1芯片的平台上，使用Real-ESRGAN的处理速度约为380万像素每分钟。这意味着如果您上传了一张1920x1080分辨率的图像，服务端需要至少30秒来对图片进行处理。当服务使用人数较多时，请求将依次排队处理，此时可能需要更长的时间来获取回复邮件。

-更新日志-

emailSR v2.0更新日志：

新增：
1、新增单用户多图片处理能力
2、新增白名单机制，新增VIP用户判别能力（暂未启用）
3、新增超分辨率模型自定义能力（暂未启用，预计v2.1版本开放）

改进：
1、大幅优化代码结构
2、提高注释详细程度
3、提高可维护性与拓展性
4、修改了回复邮件的内容
5、移除了处理前的预先回复邮件（后续按照处理图像的总分辨率智能决策是否发送）

修复：
1、修复了返回邮件中，发件人格式错误的问题，目前发件人被设置为Kokomi	<741083048@qq.com>
2、修复了返回邮件中，附件文件名错误的问题
6、缓解了网络不稳定导致的服务端程序崩溃
3、缓解了偶发编码错误导致的邮件获取失败，目前使用errors='ignore’忽略编码错误，可靠性未知


emailSR v2.1更新日志：

修复：
1、修复了在图像超高分辨率的情况下，出现无法压缩为jpg的错误
2、修复了图片ID错乱导致的错误处理
3、修复了网络错误导致的服务端程序崩溃

优化：
1、使用了新的已处理邮件列表管理机制，优化邮件处理顺序与逻辑
2、开发了全新的初始化脚本，用于手动排除已处理邮件列表错误
3、开发了全新的debug工具


emailSR v2.2更新日志：

新增：
1、新增黑名单机制
2、新增强制分辨率上限：2500万像素，该上限无法突破

修复：
1、修复了偶发的POP3连接关闭错误

优化：
1、优化了邮件获取出错时的跳过逻辑，提高稳定性
2、丰富了无法完成请求时，回复邮件中的内容。现在可以告知用户分辨率过高或后缀错误


emailSR v2.3更新日志：

新增：
1、全新开发了可用于检查emailSR服务状态的安卓app——emailSR Checker，欢迎使用。当前最新版本为v1.2，已上传至酷安开发者平台，正在审核中。预览版下载地址：https://github.com/YNW256/emailSR/releases
2、新增了用户自定义超分辨率处理模型功能。该功能当前处于内测状态，已启用白名单机制，请联系酷安@珊瑚宫心海 来参与测试
3、新增了一个额外的附加功能，用于全新服务emailGallery的前期可行性验证。该功能暂时不能公开，请联系酷安@珊瑚宫心海 来参与测试

修复：
1、修复多文件处理时，总文件大小超过50MB而导致的邮件无法发送问题

优化：
1、优化了多文件处理总文件大小过大时的邮件发送逻辑
2、更新了图片压缩判别算法，优化了特定情况下图片压缩的压缩率

已知问题：
1、特定情况下图片计数错误
